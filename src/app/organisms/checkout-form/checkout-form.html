<div class="card border-0 shadow-lg rounded-4 bg-white overflow-hidden">
  <div class="card-body p-4">
    <form [formGroup]="form" (ngSubmit)="pagar()">
      
      <div class="row g-3 mb-4">
        <div class="col-md-4">
          <div class="form-floating">
            <input type="text" class="form-control" id="hora" formControlName="hora" placeholder="HH:MM"
                   [class.is-invalid]="form.get('hora')?.invalid && form.get('hora')?.touched">
            <label for="hora">Hora</label>
          </div>
        </div>
        <div class="col-md-8">
          <div class="form-floating">
            <input type="text" class="form-control" id="dir" formControlName="direccion" placeholder="Dir"
                   [class.is-invalid]="form.get('direccion')?.invalid && form.get('direccion')?.touched">
            <label for="dir">Dirección</label>
          </div>
        </div>
      </div>

      <hr class="my-4 opacity-10">

      <h6 class="fw-bold text-primary mb-3">Selecciona método de pago</h6>

      <div class="d-flex align-items-center gap-3 mb-3 p-3 rounded-3 border transition-bg"
           [class.bg-primary-subtle]="form.get('metodo')?.value === 'tarjeta'"
           [class.border-primary]="form.get('metodo')?.value === 'tarjeta'">
        
        <div class="form-check">
          <input class="form-check-input fs-5" type="radio" name="metodo" id="optCard" value="tarjeta" formControlName="metodo">
        </div>

        <i class="bi bi-credit-card-2-front fs-2 text-primary"></i>

        <div class="flex-grow-1">
          <label class="form-label small fw-bold mb-1" for="optCard">Tarjeta de Crédito</label>
          <input type="text" class="form-control" formControlName="tarjeta" placeholder="XXXX XXXX XXXX XXXX"
                 [class.is-invalid]="form.get('tarjeta')?.invalid && form.get('tarjeta')?.touched">
          
          @if(form.get('tarjeta')?.invalid && form.get('tarjeta')?.touched) {
            <div class="invalid-feedback small">Introduce 16 dígitos.</div>
          }
        </div>
      </div>

      <div class="d-flex align-items-center gap-3 mb-4 p-3 rounded-3 border transition-bg"
           [class.bg-primary-subtle]="form.get('metodo')?.value === 'bizum'"
           [class.border-primary]="form.get('metodo')?.value === 'bizum'">
        
        <div class="form-check">
          <input class="form-check-input fs-5" type="radio" name="metodo" id="optBizum" value="bizum" formControlName="metodo">
        </div>

        <i class="bi bi-phone fs-2 text-primary"></i>

        <div class="flex-grow-1">
          <label class="form-label small fw-bold mb-1" for="optBizum">Bizum Móvil</label>
          <input type="text" class="form-control" formControlName="telefono" placeholder="600 000 000"
                 [class.is-invalid]="form.get('telefono')?.invalid && form.get('telefono')?.touched">
          
          @if(form.get('telefono')?.invalid && form.get('telefono')?.touched) {
            <div class="invalid-feedback small">Introduce 9 dígitos.</div>
          }
        </div>
      </div>

      <button type="submit" class="btn btn-primary w-100 py-3 rounded-pill fw-bold shadow-sm">
        FINALIZAR PEDIDO
      </button>

    </form>
  </div>
</div>

@if (showModal) {
  <div class="position-fixed top-0 start-0 w-100 h-100 bg-dark bg-opacity-75 d-flex align-items-center justify-content-center" style="z-index: 2000;">
    <div class="card p-5 text-center rounded-5 shadow-lg animate-pop">
      <i class="bi bi-check-circle-fill text-success display-1 mb-3"></i>
      <h2>¡Pedido Confirmado!</h2>
      <p class="lead mb-4">Tu pizza está en el horno.</p>
      <button class="btn btn-success btn-lg rounded-pill px-5" (click)="confirmar()">Genial</button>
    </div>
  </div>
}